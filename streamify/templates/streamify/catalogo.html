{% extends "base.html" %}
{% load static %}
{% load replace_titles %}

{% block children %}
<html>
                            <title>Catalogo</title>
                            <head>
                                <meta charset='utf-8'>
                                <meta name='viewport' content='width=device-width, initial-scale=1'>
                                <link href='https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css' rel='stylesheet'>
                                <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
                                <style>::-webkit-scrollbar {
                                  width: 8px;
                                }
                                /* Track */
                                ::-webkit-scrollbar-track {
                                  background: #f1f1f1; 
                                }
                                 
                                /* Handle */
                                ::-webkit-scrollbar-thumb {
                                  background: #888; 
                                }
                                
                                /* Handle on hover */
                                ::-webkit-scrollbar-thumb:hover {
                                  background: #555; 
                                } #      

                                *{
                                    margin: 0;
                                    padding: 0;
                                    box-sizing: border-box;
                                    font-family: 'poppins', sans-serif;
                                }
                                
                                .button_link{
                                    text-decoration: none;
                                    display: inline-block;
                                    position: relative;
                                    padding: 15px 20px;
                                    text-transform: uppercase;
                                    color: #ddd;
                                    background: #1C2833;
                                    font-size: 12px;
                                    margin: 5px;
                                    letter-spacing: 0.7em;
                                    border-radius: 12px;
                                }

                                .button_link p{
                                    position: absolute;
                                    display: block;
                                    background: #FF5722;
                                }

                                .button_link p:nth-child(1){
                                    left: 0;
                                    bottom: 0;
                                    width: 100%;
                                    height: 2px;
                                    transform: scaleX(0);
                                    transform-origin: right;
                                    transition: transform 0.1s;
                                }

                                .button_link:hover p:nth-child(1){
                                    transform: scaleX(1);
                                    transform-origin: left;
                                    transition: transform 0.1s;
                                }
                                
                                .button_link p:nth-child(2){
                                    right: 0;
                                    bottom: 0;
                                    width: 2px;
                                    height: 100%;
                                    transform: scaleY(0);
                                    transform-origin: top;
                                    transition: transform 0.1s;
                                }

                                .button_link:hover p:nth-child(2){
                                    transform: scaleY(1);
                                    transform-origin: bottom;
                                    transition: transform 0.1s;
                                    transition-delay: 0.1s;
                                }
                                
                                .button_link p:nth-child(3){
                                    top: 0;
                                    right: 0;
                                    width: 100%;
                                    height: 2px;
                                    transform: scaleX(0);
                                    transform-origin: left;
                                    transition: transform 0.1s;
                                }

                                .button_link:hover p:nth-child(3){
                                    transform: scaleX(1);
                                    transform-origin: right;
                                    transition: transform 0.1s;
                                    transition-delay: 0.1s;
                                }
                                
                                .button_link p:nth-child(4){
                                    top: 0;
                                    left: 0;
                                    width: 2px;
                                    height: 100%;
                                    transform: scaleY(0);
                                    transform-origin: bottom;
                                }

                                .button_link:hover p:nth-child(4){
                                    transform: scaleY(1);
                                    transform-origin: top;
                                    transition: transform 0.1s;
                                    transition-delay: 0.1s;
                                }

                                .button_link:hover{
                                    transition: 0.7s;
                                    transition-delay: 0.1s;
                                    background: #FF5722;
                                }

                            </style>
                                </head>
                                <body className='snippet-body'>
                                <div class="min-h-screen bg-red-800 py-5">
        <div class='overflow-x-auto w-full'>
            <table class='mx-auto max-w-4xl w-full whitespace-nowrap rounded-lg bg-white divide-y divide-gray-300 overflow-hidden'>
                <thead class="bg-gray-900">
                    <tr class="text-white text-center">
                        <th class="font-semibold text-sm uppercase px-6 py-4"> Titolo </th>
                        <th class="font-semibold text-sm uppercase px-6 py-4"> Designation </th>
                        <th class="font-semibold text-sm uppercase px-6 py-4 text-center"> Stato </th>
                        <th class="font-semibold text-sm uppercase px-6 py-4 text-center"> Guarda ora </th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                    {% for film in film_list %}
                    <tr>
                        <td class="px-6 py-4">
                            <div class="flex items-center space-x-3">
                                <div>
                                   <a href="/streamify/descr_film/{{film.titolo}}">
                                        {{film.titolo | replace_titles}}
                                    </a>
                                    <p class="text-gray-500 text-sm font-semibold tracking-wide"> 
                                    </p>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4">
                            <center> <p class="text-gray-500 text-sm font-semibold tracking-wide">
                                {% for genere in film.generi.all %}
                                    {{genere.name}}
                                {% endfor %}
                            </p> </center>
                        </td>
                        <td class="px-6 py-4 text-center">
                                {% if film in logged_user.film_guardati.all %}
                                <span class="text-white text-sm w-1/3 pb-1 bg-green-600 font-semibold px-2 rounded-full">
                                    Guardato
                                </span>
                                {% else %}
                                    <span class="text-white text-sm w-1/3 pb-1 bg-red-600 font-semibold px-2 rounded-full">
                                        Non guardato
                                    </span>
                                {% endif %}
                            
                        </td>
                        <td class="px-6 py-4 text-center">
                            <a class="button_link" href="/streamify/guarda_film/{{film.titolo}}">
                                Guarda ora
                            </a>
                        </td>
                    </tr>
                    <tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
<script type='text/javascript' src='https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js'></script>

</body>
</html>
{% endblock %}